{"version":3,"sources":["assets\\Script\\player.js"],"names":["cc","Class","Component","properties","jumpHeight","jumpDuration","pace","fruitLabel","Label","jumpSound","AudioClip","jumpSkill","life","lifeLabel","onLoad","director","getPhysicsManager","enabled","getCollisionManager","systemEvent","on","SystemEvent","EventType","KEY_DOWN","key","keyCode","macro","KEY","up","Global","dianjiSound","audioEngine","play","find","getComponent","sound","node","runAction","setJumpAction","left","value_left","right","value_right","KEY_UP","onCollisionEnter","other","self","group","destroy","blink","string","start","update","dt","leftMove","Animation","stop","rightMove","rMove","moveBy","v2","lMove","jumpUp","easing","easeCubicActionOut","onDestroy","off"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n        // 主角跳跃高度\r\n        jumpHeight: 200,\r\n        // 主角跳跃持续时间\r\n        jumpDuration: 0.3,\r\n        pace: 10,\r\n        fruitLabel: cc.Label,\r\n        jumpSound: cc.AudioClip,\r\n        jumpSkill: 1,\r\n        life: 3,\r\n        lifeLabel: cc.Label,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        cc.director.getPhysicsManager().enabled = true;\r\n        cc.director.getCollisionManager().enabled = true;\r\n        //按压功能\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, function (key) {\r\n            if (key.keyCode == cc.macro.KEY.up) {\r\n                if (this.jumpSkill > 0) {\r\n                    if (Global.dianjiSound) {\r\n                        cc.audioEngine.play(cc.find(\"Canvas/Main Camera/pause\").getComponent(\"game_menu\").sound, false, 1);\r\n                    }\r\n                    this.node.runAction(this.setJumpAction());\r\n                    this.jumpSkill = 0;\r\n                }\r\n            };\r\n            if (key.keyCode == cc.macro.KEY.left) {\r\n                this.value_left = 1;\r\n            };\r\n            if (key.keyCode == cc.macro.KEY.right) {\r\n                this.value_right = 1;\r\n            };\r\n        }, this);\r\n        //抬起功能\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, function (key) {\r\n            if (key.keyCode == cc.macro.KEY.left) {\r\n                this.value_left = 0;\r\n            };\r\n            if (key.keyCode == cc.macro.KEY.right) {\r\n                this.value_right = 0;\r\n            };\r\n        }, this);\r\n\r\n    },\r\n\r\n    onCollisionEnter: function (other, self) {\r\n        if (other.node.group == \"jellyfish\") {\r\n            other.node.destroy();\r\n            this.life--;\r\n            self.node.runAction(new cc.blink(0.5, 3));\r\n            //cc.find(\"Canvas/Main Camera\").getComponent(\"game_1\").timer = 0;\r\n            this.lifeLabel.string = \"X \" + this.life;\r\n        };\r\n        if (other.node.group == \"heart\") {\r\n            this.life++;\r\n            this.lifeLabel.string = \"X \" + this.life;\r\n            other.node.destroy();\r\n        };\r\n        if (other.node.group == \"home\") {\r\n            this.jumpSkill = 1;\r\n        }\r\n    },\r\n\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    update(dt) {\r\n        if (this.value_left == 1) {\r\n            this.node.runAction(this.leftMove());\r\n            this.getComponent(cc.Animation).play(\"派大星左走\");\r\n        }\r\n        else {\r\n            this.getComponent(cc.Animation).stop(\"派大星左走\");\r\n        }\r\n        if (this.value_right == 1) {\r\n            this.node.runAction(this.rightMove());\r\n            this.getComponent(cc.Animation).play(\"派大星右走\");\r\n        }\r\n        else {\r\n            this.getComponent(cc.Animation).stop(\"派大星右走\");\r\n        }\r\n    },\r\n\r\n\r\n    rightMove: function () {\r\n        let rMove = cc.moveBy(0.02, cc.v2(this.pace, 0));\r\n        return this.node.runAction(rMove);\r\n    },\r\n    leftMove: function () {\r\n        let lMove = cc.moveBy(0.02, cc.v2(-this.pace, 0));\r\n        return this.node.runAction(lMove);\r\n    },\r\n    setJumpAction: function () {\r\n        // 跳跃上升\r\n        let jumpUp = cc.moveBy(this.jumpDuration, cc.v2(0, this.jumpHeight)).easing(cc.easeCubicActionOut());\r\n        // 下落\r\n        // let jumpDown = cc.moveBy(this.jumpDuration, cc.v2(0, -this.jumpHeight)).easing(cc.easeCubicActionIn());\r\n        // // 单次上升下落\r\n        // return cc.sequence(jumpUp, jumpDown);\r\n        return this.node.runAction(jumpUp);\r\n    },\r\n\r\n    onDestroy() {\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, function (key) {\r\n            if (key.keyCode == cc.macro.KEY.up) {\r\n                if (this.jumpSkill > 0) {\r\n                    if (Global.dianjiSound) {\r\n                        cc.audioEngine.play(cc.find(\"Canvas/Main Camera/pause\").getComponent(\"game_menu\").sound, false, 1);\r\n                    }\r\n                    this.node.runAction(this.setJumpAction());\r\n                    this.jumpSkill = 0;\r\n                }\r\n            };\r\n            if (key.keyCode == cc.macro.KEY.left) {\r\n                this.value_left = 1;\r\n            };\r\n            if (key.keyCode == cc.macro.KEY.right) {\r\n                this.value_right = 1;\r\n            };\r\n        }, this);\r\n    },\r\n});\r\n"]}