{"version":3,"sources":["assets\\Script\\player.js"],"names":["cc","Class","Component","properties","value_left","value_right","jumpHeight","jumpDuration","pace","fruitLabel","Label","jumpSound","AudioClip","jumpSkill","life","lifeLabel","onLoad","director","getPhysicsManager","enabled","getCollisionManager","systemEvent","on","SystemEvent","EventType","KEY_DOWN","key","keyCode","macro","KEY","up","Global","dianjiSound","audioEngine","play","find","getComponent","sound","node","runAction","setJumpAction","left","right","KEY_UP","onCollisionEnter","other","self","group","destroy","blink","string","start","update","dt","leftMove","Animation","stop","rightMove","rMove","moveBy","v2","lMove","jumpUp","easing","easeCubicActionOut"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        value_left: 0,\r\n        value_right: 0,\r\n        // 主角跳跃高度\r\n        jumpHeight: 200,\r\n        // 主角跳跃持续时间\r\n        jumpDuration: 0.3,\r\n        pace: 10,\r\n        fruitLabel: cc.Label,\r\n        jumpSound: cc.AudioClip,\r\n        jumpSkill: 1,\r\n        life: 3,\r\n        lifeLabel: cc.Label,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        cc.director.getPhysicsManager().enabled = true;\r\n        cc.director.getCollisionManager().enabled = true;\r\n        //按压功能\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, function (key) {\r\n            if (key.keyCode == cc.macro.KEY.up) {\r\n                if (this.jumpSkill > 0) {\r\n                    if (Global.dianjiSound) {\r\n                        cc.audioEngine.play(cc.find(\"Canvas/Main Camera/pause\").getComponent(\"game_menu\").sound, false, 1);\r\n                    }\r\n                    this.node.runAction(this.setJumpAction());\r\n                    this.jumpSkill = 0;\r\n                }\r\n            };\r\n            if (key.keyCode == cc.macro.KEY.left) {\r\n                this.value_left = 1;\r\n            };\r\n            if (key.keyCode == cc.macro.KEY.right) {\r\n                this.value_right = 1;\r\n            };\r\n        }, this);\r\n        //抬起功能\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, function (key) {\r\n            if (key.keyCode == cc.macro.KEY.left) {\r\n                this.value_left = 0;\r\n            };\r\n            if (key.keyCode == cc.macro.KEY.right) {\r\n                this.value_right = 0;\r\n            };\r\n        }, this);\r\n\r\n    },\r\n\r\n    onCollisionEnter: function (other, self) {\r\n        if (other.node.group == \"jellyfish\") {\r\n            other.node.destroy();\r\n            this.life--;\r\n            self.node.runAction(new cc.blink(0.5, 3));\r\n            //cc.find(\"Canvas/Main Camera\").getComponent(\"game_1\").timer = 0;\r\n            this.lifeLabel.string = \"X \" + this.life;\r\n        };\r\n        if (other.node.group == \"heart\") {\r\n            this.life++;\r\n            this.lifeLabel.string = \"X \" + this.life;\r\n            other.node.destroy();\r\n        };\r\n        if (other.node.group == \"home\") {\r\n            this.jumpSkill = 1;\r\n        }\r\n    },\r\n\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    update(dt) {\r\n        if (this.value_left == 1) {\r\n            this.node.runAction(this.leftMove());\r\n            this.getComponent(cc.Animation).play(\"派大星左走\");\r\n        }\r\n        else {\r\n            this.getComponent(cc.Animation).stop(\"派大星左走\");\r\n        }\r\n        if (this.value_right == 1) {\r\n            this.node.runAction(this.rightMove());\r\n            this.getComponent(cc.Animation).play(\"派大星右走\");\r\n        }\r\n        else {\r\n            this.getComponent(cc.Animation).stop(\"派大星右走\");\r\n        }\r\n    },\r\n\r\n\r\n    rightMove: function () {\r\n        let rMove = cc.moveBy(0.02, cc.v2(this.pace, 0));\r\n        return this.node.runAction(rMove);\r\n    },\r\n    leftMove: function () {\r\n        let lMove = cc.moveBy(0.02, cc.v2(-this.pace, 0));\r\n        return this.node.runAction(lMove);\r\n    },\r\n    setJumpAction: function () {\r\n        // 跳跃上升\r\n        let jumpUp = cc.moveBy(this.jumpDuration, cc.v2(0, this.jumpHeight)).easing(cc.easeCubicActionOut());\r\n        // 下落\r\n        // let jumpDown = cc.moveBy(this.jumpDuration, cc.v2(0, -this.jumpHeight)).easing(cc.easeCubicActionIn());\r\n        // // 单次上升下落\r\n        // return cc.sequence(jumpUp, jumpDown);\r\n        return this.node.runAction(jumpUp);\r\n    },\r\n});\r\n"]}